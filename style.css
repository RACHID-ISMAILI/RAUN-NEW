/* ============ Variables & Base ============ */
:root{
  --bg:#030d1a; --panel:#0a1a2a; --glass:rgba(5,15,30,.75);
  --cyan: #00c6ff; --neon:#00ffcc; --green:#00ffaa; --amber:#ffcc33; --red:#ff597a;
  --text:#d8f2ff; --text-dim:#a6e8ff; --border:rgba(0,200,255,.3);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:#000; color:var(--text); font:400 16px/1.6 'Exo 2', system-ui, -apple-system, Segoe UI, Roboto, Arial;
  overflow-x:hidden;
}

/* Fond vivant */
#matrix-bg{ position:fixed; inset:0; z-index:-2; background:#000; opacity:.18; filter: blur(2px) saturate(120%); }
#particles{ position:fixed; inset:0; z-index:-1; pointer-events:none; }

/* Header */
header{
  position:sticky; top:0; z-index:20;
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  padding:10px 12px; background:rgba(3,12,24,.8); backdrop-filter: blur(6px);
  border-bottom:1px solid var(--border);
}
.brand{ display:flex; align-items:center; gap:8px; font:800 20px 'Orbitron',sans-serif; letter-spacing:2px; color:var(--neon); text-shadow:0 0 16px rgba(0,255,204,.45) }
.navbtns{ display:flex; flex-wrap:wrap; gap:8px; }

/* Buttons */
.btn{
  background:rgba(0,0,0,.25); color:var(--text); border:1px solid var(--border);
  padding:8px 10px; border-radius:10px; cursor:pointer; transition:.18s ease; font-weight:600;
}
.btn:hover{ transform:translateY(-1px); border-color:rgba(0,255,204,.6); box-shadow:0 0 12px rgba(0,255,204,.2); }
.btn:disabled{ opacity:.5; cursor:not-allowed; transform:none; }
.btn-purple{ border-color:#b967ff; box-shadow:0 0 10px rgba(185,103,255,.15); }
.btn-amber{ border-color:var(--amber); }
.btn-green{ border-color:var(--green); }
.btn-cyan{ border-color:var(--cyan); }
.btn-red{ border-color: var(--red); }

/* Layout principal */
.wrap{ padding:16px; }
.grid{ display:grid; grid-template-columns: 320px 1fr; gap:14px; }
.card{
  background:var(--glass); border:1px solid var(--border); border-radius:16px;
  padding:14px; box-shadow:0 10px 32px rgba(0,10,20,.45), inset 0 0 0 1px rgba(0,255,204,.05);
  min-height:120px;
}
.title{ font:800 1.05rem 'Montserrat',sans-serif; color:#c7f2ff; margin-bottom:8px }
.sub{ color:var(--text-dim); opacity:.9; font-weight:600; margin-bottom:8px }
.smallInput,.bigInput,textarea{
  width:100%; background:rgba(0,0,0,.25); border:1px solid var(--border); color:var(--text); border-radius:10px;
  padding:10px; font:500 0.95rem 'Exo 2',sans-serif; outline:none;
}
.bigArea{ min-height:120px; }

/* Viewer capsules */
.viewer{ margin-bottom:14px; }
.capsuleTitle{ font:800 1.1rem 'Montserrat',sans-serif; color:#dff9ff; margin-bottom:8px }
.capsuleBody{ white-space:pre-wrap; background:rgba(0,0,0,.25); padding:12px; border-radius:10px; border:1px solid var(--border); }
.capsuleMeta{ display:flex; gap:8px; align-items:center; margin-top:8px }
.viewerNav{ display:flex; gap:8px; margin-top:8px }

/* List items (intentions, commentaires) */
.list .item{
  background:rgba(0,0,0,.25); border:1px solid var(--border); border-radius:12px; padding:10px; margin:8px 0;
}

/* Notifications */
.notification{
  position:fixed; right:12px; bottom:12px; padding:10px 12px; border-radius:10px;
  border:1px solid var(--border); background:rgba(0,16,32,.85);
  transform:translateY(20px); opacity:0; transition:.25s ease; z-index:50;
}
.notification.show{ transform:translateY(0); opacity:1; }
.notification.success{ border-color:var(--green) }
.notification.error{ border-color:var(--red) }

/* Assistant IA */
.ai-fab{
  position:fixed; right:14px; bottom:14px; width:52px; height:52px; border-radius:50%;
  background:linear-gradient(180deg, rgba(0,255,204,.25), rgba(0,180,255,.25));
  border:1px solid var(--border); color:#fff; box-shadow:0 12px 30px rgba(0,10,20,.5);
  cursor:pointer; display:grid; place-items:center; z-index:40;
}
.chat-container{
  position:fixed; right:14px; bottom:76px; width:min(420px, 90vw); max-height:70vh; overflow:hidden;
  background:rgba(0,14,28,.95); border:1px solid var(--border); border-radius:14px; display:none; z-index:45;
  box-shadow:0 20px 60px rgba(0,10,20,.6), inset 0 0 0 1px rgba(0,255,204,.05);
}
.chat-container.open{ display:flex; flex-direction:column; }
.chat-header{ display:flex; align-items:center; justify-content:space-between; gap:8px; padding:8px 10px; border-bottom:1px solid var(--border); }
.chat-tools .chip{
  display:inline-block; padding:4px 8px; border-radius:999px; border:1px solid var(--border);
  background:rgba(0,0,0,.3); margin-right:6px; cursor:pointer; font-weight:700;
}
.chat-messages{ flex:1; overflow:auto; padding:10px; }
.chat-input{ display:flex; gap:8px; padding:8px 10px; border-top:1px solid var(--border); }
.chat-input input{ flex:1; }

/* Footer */
.footer{ text-align:center; color:#8cc8ff; font-size:.92rem; border-top:1px solid var(--border); padding:18px; margin-top:12px; background:rgba(5,15,30,.85); border-radius:16px }

/* ====== HOME (landing) ====== */
.home{ display:flex; align-items:center; justify-content:center; min-height:60vh; }
.home-hero{ text-align:center; padding:30px 10px; }
.home-logo{ font:800 56px 'Orbitron',sans-serif; letter-spacing:4px; color:var(--neon); text-shadow:0 0 18px rgba(0,255,204,.6) }
@media (max-width:600px){ .home-logo{ font-size:42px } }
.home-sub{ margin-top:10px; color:#a6e8ff; opacity:.9; font:500 1.05rem 'Exo 2',sans-serif; }
.home-sign{ margin-top:8px; color:#9feaff; opacity:.8; font:600 .95rem 'Exo 2',sans-serif; }
.home-enter{ margin-top:16px; }

/* ====== ABOUT ====== */
.about{ display:flex; align-items:center; justify-content:center; min-height:60vh; }
.about-card{
  max-width:720px; width:100%; margin:0 auto; text-align:center;
  background:rgba(0,20,40,.6); border:1px solid rgba(0,200,255,.35);
  padding:26px; border-radius:18px; box-shadow:0 10px 40px rgba(0,5,15,.6);
}
.about-avatar{
  width:160px; height:160px; border-radius:50%; margin:10px auto 12px;
  border:3px solid rgba(0,255,255,.4); overflow:hidden;
  box-shadow:0 0 40px rgba(0,255,204,.35), 0 0 60px rgba(0,200,255,.2);
}
.about-avatar img{ width:100%; height:100%; object-fit:cover; display:block; }
.about-name{ font:700 1.2rem 'Orbitron',sans-serif; color:#c7f2ff; margin-top:6px; }
.about-logo{ font:800 36px 'Orbitron',sans-serif; color:var(--neon); letter-spacing:6px; margin-top:10px; text-shadow:0 0 16px rgba(0,255,204,.5) }
.about-quote{
  margin:16px auto 10px; color:#a6e8ff; font-size:1.02rem; line-height:1.7;
  background:rgba(0,0,0,.35); border-left:3px solid var(--green); padding:12px 14px; border-radius:8px; text-align:left;
}
.about-sign{ color:#9feaff; opacity:.85; font-weight:700; margin-top:6px; }
.about-actions{ display:flex; gap:10px; justify-content:center; margin-top:12px; }

/* ====== Public layout + rail ====== */
.publicLayout{ display:grid; grid-template-columns: 1fr 300px; gap:14px; }
.publicMain{ min-width:0; }
.publicRail{ position:relative; }
.publicRail .railHead{
  font:700 0.95rem 'Exo 2',sans-serif; color:#a6e8ff; margin-bottom:8px; padding:8px 10px;
  border:1px solid var(--border); border-radius:10px; background:rgba(3,12,24,.6); box-shadow:0 6px 22px rgba(0,15,30,.35)
}
.publicRail .railScroll{
  position: sticky; top:12px; max-height: calc(100vh - 140px); overflow-y:auto; padding-right:4px;
  border:1px solid var(--border); border-radius:12px; background:linear-gradient(180deg, rgba(0,20,40,.55), rgba(0,12,24,.55));
  box-shadow: inset 0 0 0 1px rgba(0,255,204,.05), 0 10px 30px rgba(0,10,20,.45);
}

/* Vignettes */
.thumb{
  display:block; width:100%; text-align:left; cursor:pointer; background:rgba(0,0,0,.35);
  border:1px solid rgba(0,200,255,.25); border-radius:12px; padding:10px 12px; margin:8px; color:#cfefff; transition:all .18s ease;
}
.thumb:hover{ transform:translateY(-1px); border-color:rgba(0,255,204,.55); box-shadow:0 0 14px rgba(0,255,204,.18) }
.thumb.active{ border-color:rgba(0,255,204,.9); box-shadow:0 0 18px rgba(0,255,204,.35), inset 0 0 0 1px rgba(0,255,204,.35) }
.thumb-title{
  font:700 .96rem 'Montserrat',sans-serif; color:#c9f7ff; margin-bottom:4px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.thumb-excerpt{
  font:500 .86rem 'Exo 2',sans-serif; color:#9fdcff; opacity:.9; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;
}
.thumb-meta{ display:flex; gap:10px; margin-top:6px; font:600 .78rem 'Exo 2',sans-serif; color:#aee8ff; opacity:.95; }
.thumb-meta span{ background:rgba(0,0,0,.25); border:1px solid rgba(0,200,255,.22); padding:3px 6px; border-radius:6px; }
.thumb-empty{ margin:10px; padding:12px; border-radius:10px; color:#9fdcff; opacity:.8; background:rgba(0,0,0,.25); border:1px dashed rgba(0,200,255,.3); }

/* Recherche & Tri */
.railControls{ position: sticky; top:12px; z-index:3; }
.railSearch{
  display:flex; align-items:center; gap:8px; margin:8px 0 8px; padding:10px 12px;
  border:1px solid var(--border); border-radius:12px; background:linear-gradient(180deg, rgba(0,22,38,.75), rgba(0,10,20,.75));
  box-shadow:0 10px 24px rgba(0,12,24,.45), inset 0 0 0 1px rgba(0,255,204,.05);
}
.railSearch input{ flex:1; background:transparent; border:none; outline:none; color:#dff7ff; font:500 .95rem 'Exo 2',sans-serif; }
.railSearch input::placeholder{ color:#9fdcff; opacity:.6; }
.clearBtn{ border:1px solid rgba(255,100,120,.35); background:rgba(40,0,10,.4); color:#ffc9d2; padding:6px 8px; border-radius:8px; cursor:pointer; }
.clearBtn:hover{ border-color:rgba(255,120,140,.8); box-shadow:0 0 12px rgba(255,120,140,.25); }
.railSort{
  display:flex; align-items:center; gap:8px; margin:6px 0 8px; padding:8px 10px;
  border:1px solid rgba(0,200,255,.3); border-radius:12px; background:linear-gradient(180deg, rgba(0,18,32,.7), rgba(0,10,20,.7));
  box-shadow:0 8px 20px rgba(0,12,24,.4), inset 0 0 0 1px rgba(0,255,204,.04);
}
.railSort select{
  appearance:none; background:transparent; color:#c9f7ff; border:none; outline:none;
  font:600 .92rem 'Exo 2',sans-serif; padding:6px 28px 6px 8px; border-radius:8px; cursor:pointer;
}
.railSort .sortIcon{ margin-left:-24px; color:#9feaff; pointer-events:none; }
.railInfo{ margin:6px 0 10px; padding:6px 10px; border-radius:8px; color:#9fdcff; font:600 .84rem 'Exo 2',sans-serif; border:1px dashed rgba(0,200,255,.28); background:rgba(0,20,40,.35); }
mark{ background:linear-gradient(180deg, rgba(0,255,204,.35), rgba(0,180,255,.25)); color:#07131f; padding:1px 3px; border-radius:4px; }

/* Status badges */
.status-badge {
  display: inline-block;
  padding: 4px 8px;
  border-radius: 6px;
  font-size: 0.75rem;
  font-weight: 600;
  margin-left: 8px;
}
.status-pending {
  background-color: rgba(255, 204, 51, 0.2);
  border: 1px solid rgba(255, 204, 51, 0.5);
  color: #ffcc33;
}
.status-approved {
  background-color: rgba(0, 255, 170, 0.2);
  border: 1px solid rgba(0, 255, 170, 0.5);
  color: #00ffaa;
}
.status-rejected {
  background-color: rgba(255, 89, 122, 0.2);
  border: 1px solid rgba(255, 89, 122, 0.5);
  color: #ff597a;
}

/* AI Response */
.ai-response {
  background: rgba(0, 20, 40, 0.5);
  border-left: 3px solid var(--cyan);
  padding: 10px;
  margin-top: 8px;
  border-radius: 0 8px 8px 0;
  font-style: italic;
}

/* Approval interface */
.approval-panel {
  margin-top: 16px;
  padding: 12px;
  background: rgba(0, 20, 40, 0.4);
  border: 1px solid var(--border);
  border-radius: 10px;
}
.research-results {
  max-height: 200px;
  overflow-y: auto;
  padding: 8px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 8px;
  margin: 8px 0;
}


/* Matrix 2025 focus toggle */
body[data-matrix="low"] #matrix-bg{
  opacity:.06;
  filter: blur(2px) saturate(100%);
}


/* Respecte les préférences d'accessibilité: réduit fortement l'effet */
@media (prefers-reduced-motion: reduce) {
  #matrix-bg { opacity:.05; filter: blur(1px) saturate(100%); }
}
